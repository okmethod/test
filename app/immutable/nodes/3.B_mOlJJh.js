import{s as B,e as p,a as S,c as g,b as m,m as _,f as x,g as v,h as M,i as E,j as f,n as b,q as H,u as R,v as w}from"../chunks/scheduler.DGNqcs4H.js";import{S as P,i as W}from"../chunks/index.D9rkoCaJ.js";function I(){return Matter.Engine.create({enableSleeping:!0,positionIterations:6,velocityIterations:4,constraintIterations:6})}function D(){return Matter.Runner.create()}function j(r,e){return Matter.Render.create({element:e,engine:r,options:{width:e.clientWidth,height:e.clientHeight,pixelRatio:1,background:"#888888",hasBounds:!1,wireframes:!1,showSleeping:!1}})}function k(r,e){const n=Matter.Mouse.create(e.canvas);return e.mouse=n,Matter.MouseConstraint.create(r,{mouse:n,constraint:{stiffness:.2,damping:0,length:0,render:{visible:!0,lineWidth:2,strokeStyle:"#00ff00"}}})}function L(r){const e=r.clientWidth,n=r.clientHeight,t=2e3,i=[Matter.Bodies.rectangle(e/2,-t/2,e,t,{isStatic:!0}),Matter.Bodies.rectangle(e/2,n+t/2,e,t,{isStatic:!0}),Matter.Bodies.rectangle(-t/2,n/2,t,n,{isStatic:!0}),Matter.Bodies.rectangle(e+t/2,n/2,t,n,{isStatic:!0})],a=Matter.Bodies.rectangle(150,50,40,40),s=Matter.Bodies.rectangle(180,100,40,40),u=Matter.Bodies.rectangle(150,300,200,60,{isStatic:!0});return[...i,a,s,u]}function T(r,e,n,t){function i(){t.isHolding=!0,Matter.World.add(r,e)}function a(){t.isHolding=!1,Matter.World.remove(r,e)}function s(){t.isHolding=!1,e.constraint.bodyA=null,e.constraint.bodyB=null,e.mouse.position={x:-1,y:-1},Matter.World.remove(r,e)}function u(c){const o=n.getBoundingClientRect();(c.clientX<o.left||c.clientX>o.right||c.clientY<o.top||c.clientY>o.bottom)&&Matter.World.remove(r,e)}return{pointerdown:i,pointerup:a,pointerleave:s,pointermove:u}}function C(r){let e,n,t='<h1 class="cTitleStyle md:!text-3xl">Example route</h1>',i,a,s,u="matter-js renderContainer",c,o;return{c(){e=p("div"),n=p("div"),n.innerHTML=t,i=S(),a=p("div"),s=p("span"),s.textContent=u,c=S(),o=p("div"),this.h()},l(l){e=g(l,"DIV",{class:!0});var d=m(e);n=g(d,"DIV",{class:!0,"data-svelte-h":!0}),_(n)!=="svelte-11znixk"&&(n.innerHTML=t),i=x(d),a=g(d,"DIV",{class:!0});var h=m(a);s=g(h,"SPAN",{"data-svelte-h":!0}),_(s)!=="svelte-tjtsqm"&&(s.textContent=u),c=x(h),o=g(h,"DIV",{class:!0}),m(o).forEach(v),h.forEach(v),d.forEach(v),this.h()},h(){M(n,"class","cTitlePartStyle md:!mb-4"),M(o,"class","w-80 h-80"),M(a,"class","cContentPartStyle !ml-4"),M(e,"class","cRouteBodyStyle")},m(l,d){E(l,e,d),f(e,n),f(e,i),f(e,a),f(a,s),f(a,c),f(a,o),r[1](o)},p:b,i:b,o:b,d(l){l&&v(e),r[1](null)}}}let V=!1;function q(r,e,n){let t,i,a,s,u,c;H(()=>{i=I(),a=D(),s=j(i,t),u=k(i,s);const l=L(t);{Matter.World.add(i.world,l),Matter.Runner.run(a,i),Matter.Render.run(s);let d=T(i.world,u,t,{isHolding:V});Object.entries(d).forEach(([h,y])=>{t.addEventListener(h,y)})}}),R(()=>{Matter.Render.stop(s),Matter.Runner.stop(a),Matter.World.clear(i.world,!1),Matter.Engine.clear(i),Object.entries(c).forEach(([l,d])=>{t.removeEventListener(l,d)})});function o(l){w[l?"unshift":"push"](()=>{t=l,n(0,t)})}return[t,o]}class X extends P{constructor(e){super(),W(this,e,q,C,B,{})}}export{X as component};
