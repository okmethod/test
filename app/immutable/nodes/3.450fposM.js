import{s as w,e as f,a as E,c as m,b as p,m as T,f as _,g as M,h as g,i as b,j as v,n as S,q as x,u as B,v as R}from"../chunks/scheduler.DGNqcs4H.js";import{S as y,i as H}from"../chunks/index.D9rkoCaJ.js";function W(){return Matter.Engine.create({enableSleeping:!0,positionIterations:6,velocityIterations:4,constraintIterations:6})}function C(){return Matter.Runner.create()}function L(o,t){return Matter.Render.create({element:t,engine:o,options:{width:t.clientWidth,height:t.clientHeight,pixelRatio:1,background:"#888888",hasBounds:!1,wireframes:!1,showSleeping:!1}})}function I(o,t){const n=Matter.Mouse.create(t.canvas);return t.mouse=n,Matter.MouseConstraint.create(o,{mouse:n,constraint:{stiffness:.2,damping:0,length:0,render:{visible:!0,lineWidth:2,strokeStyle:"#00ff00"}}})}function k(o){const t=o.clientWidth,n=o.clientHeight,e=2e3,r=[Matter.Bodies.rectangle(t/2,-e/2,t,e,{isStatic:!0}),Matter.Bodies.rectangle(t/2,n+e/2,t,e,{isStatic:!0}),Matter.Bodies.rectangle(-e/2,n/2,e,n,{isStatic:!0}),Matter.Bodies.rectangle(t+e/2,n/2,e,n,{isStatic:!0})],a=Matter.Bodies.rectangle(150,50,40,40),s=Matter.Bodies.rectangle(180,100,40,40),d=Matter.Bodies.rectangle(150,300,200,60,{isStatic:!0});return[...r,a,s,d]}function D(o,t,n,e){function r(){e.isHolding=!0,Matter.World.add(t.world,n)}function a(){e.isHolding=!1,Matter.World.remove(t.world,n)}function s(d){const l=d.touches[0],i=o.getBoundingClientRect();(l.clientX<i.left||l.clientX>i.right||l.clientY<i.top||l.clientY>i.bottom)&&Matter.World.remove(t.world,n)}return{handleTouchStart:r,handleTouchEnd:a,handleTouchMove:s}}function P(o){let t,n,e='<h1 class="cTitleStyle md:!text-3xl">Example route</h1>',r,a,s,d="matter-js renderContainer",l,i;return{c(){t=f("div"),n=f("div"),n.innerHTML=e,r=E(),a=f("div"),s=f("span"),s.textContent=d,l=E(),i=f("div"),this.h()},l(c){t=m(c,"DIV",{class:!0});var u=p(t);n=m(u,"DIV",{class:!0,"data-svelte-h":!0}),T(n)!=="svelte-11znixk"&&(n.innerHTML=e),r=_(u),a=m(u,"DIV",{class:!0});var h=p(a);s=m(h,"SPAN",{"data-svelte-h":!0}),T(s)!=="svelte-tjtsqm"&&(s.textContent=d),l=_(h),i=m(h,"DIV",{class:!0}),p(i).forEach(M),h.forEach(M),u.forEach(M),this.h()},h(){g(n,"class","cTitlePartStyle md:!mb-4"),g(i,"class","w-80 h-80"),g(a,"class","cContentPartStyle !ml-4"),g(t,"class","cRouteBodyStyle")},m(c,u){b(c,t,u),v(t,n),v(t,r),v(t,a),v(a,s),v(a,l),v(a,i),o[1](i)},p:S,i:S,o:S,d(c){c&&M(t),o[1](null)}}}let V=!1;function j(o,t,n){let e,r,a,s,d,l;x(()=>{r=W(),a=C(),s=L(r,e),d=I(r,s);const c=k(e);{Matter.World.add(r.world,c),Matter.World.add(r.world,d),Matter.Runner.run(a,r),Matter.Render.run(s);let u=D(e,r,d,{isHolding:V});e.addEventListener("touchstart",u.handleTouchStart),e.addEventListener("touchend",u.handleTouchEnd),e.addEventListener("touchmove",h=>u.handleTouchMove(h))}}),B(()=>{Matter.Render.stop(s),Matter.Runner.stop(a),Matter.World.clear(r.world,!1),Matter.Engine.clear(r),e.removeEventListener("touchstart",l.handleTouchStart),e.removeEventListener("touchend",l.handleTouchEnd),e.removeEventListener("touchmove",c=>l.handleTouchMove(c))});function i(c){R[c?"unshift":"push"](()=>{e=c,n(0,e)})}return[e,i]}class X extends y{constructor(t){super(),H(this,t,j,P,w,{})}}export{X as component};
